<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:lang="http://www.springframework.org/schema/lang"
	xmlns:gorm="http://grails.org/schema/gorm" xmlns:p="http://www.springframework.org/schema/p"
	xmlns:context="http://www.springframework.org/schema/context"
	xsi:schemaLocation="http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang-3.1.xsd
		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
		http://grails.org/schema/gorm http://grails.org/schema/gorm/gorm.xsd http://www.springframework.org/schema/context
	http://www.springframework.org/schema/context/spring-context.xsd">

	<bean name="org.springframework.scripting.config.scriptFactoryPostProcessor"
		class="com.eiff.framework.hystrix.dynamic.DynamicScriptFactoryPostProcessor"></bean>
	<lang:groovy refresh-check-delay="10000" script-source="groovy/Empty.groovy"></lang:groovy>


	<bean
		class="com.eiff.framework.hystrix.spring.DubboInstantiationAwareBeanPostProcessor"></bean>

	<bean id="dubboCircuitBreakerInterceptor"
		class="com.eiff.framework.hystrix.interceptor.CircuitBreakerInterceptor">
		<constructor-arg index="0" value="dubbo"/>
	</bean>

	<bean
		class="com.eiff.framework.hystrix.interceptor.advisor.DubboBeanNameAutoProxyCreator"
		p:interceptorNames="dubboCircuitBreakerInterceptor" p:optimize="false">
	</bean>
	<bean
		class="com.eiff.framework.hystrix.interceptor.advisor.CircuitBreakerAdvisor">
		<property name="advisorType" value="cache" />
		<property name="pointcutPattern">
			<list>
				<value>com.eiff.framework.cache.redis.client.HadesClient.*</value>
				<value>org.springframework.data.redis.cache.RedisCache.*</value>
			</list>
		</property>
	</bean>
</beans>
